---
sudo: required
language: python
services: docker

env:
  - distro: centos:7
  - distro: centos:6
  - distro: fedora:25
  - distro: fedora:26
  - distro: debian:7
  - distro: debian:8
  - distro: debian:9
  - distro: ubuntu:14.04
  - distro: ubuntu:16.04
  - distro: ubuntu:17.10
  - distro: alpine:3.1
  - distro: alpine:3.2
  - distro: alpine:3.3
  - distro: alpine:3.4
  - distro: alpine:3.5
  - distro: alpine:3.6
  - distro: opensuse:13.2
  - distro: opensuse:42.1
  - distro: opensuse:42.2
  - distro: opensuse:42.3

before_install:
  - docker pull "${distro}"

install:
  - containerid=$(docker container run --detach --volume $(pwd):/etc/ansible/roles/testing ${distro} sleep 300)
  - docker exec ${containerid} yum -y install ansible

script:
  - docker exec ${containerid} ansible-playbook /etc/ansible/roles/tests/test.yml --syntax-check
  - docker exec ${containerod} ansible-playbook /etc/ansible/roles/tests/test.yml --connection=local --sudo

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
